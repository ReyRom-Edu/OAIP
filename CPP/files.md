# üìò –õ–µ–∫—Ü–∏—è: –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏ —Å –ø–æ–º–æ—â—å—é –ø–æ—Ç–æ–∫–æ–≤ –≤ C++

–†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏ ‚Äî –æ–¥–Ω–∞ –∏–∑ –≤–∞–∂–Ω–µ–π—à–∏—Ö –∑–∞–¥–∞—á –ø—Ä–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏.
–§–∞–π–ª—ã –ø–æ–∑–≤–æ–ª—è—é—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã, —Ö—Ä–∞–Ω–∏—Ç—å –±–æ–ª—å—à–∏–µ –æ–±—ä—ë–º—ã –¥–∞–Ω–Ω—ã—Ö, –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –º–µ–∂–¥—É –ø—Ä–æ–≥—Ä–∞–º–º–∞–º–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏.

–í —è–∑—ã–∫–µ C++ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–∞–º–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **–º–µ—Ö–∞–Ω–∏–∑–º –ø–æ—Ç–æ–∫–æ–≤ (streams)**.
–ü–æ—Ç–æ–∫ ‚Äî —ç—Ç–æ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è, –æ–ø–∏—Å—ã–≤–∞—é—â–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±–∞–π—Ç–æ–≤, –∏–¥—É—â–∏—Ö **–∏–∑** –ø—Ä–æ–≥—Ä–∞–º–º—ã (–∑–∞–ø–∏—Å—å) –∏–ª–∏ **–≤** –ø—Ä–æ–≥—Ä–∞–º–º—É (—á—Ç–µ–Ω–∏–µ).

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–∞–º–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–π —Ñ–∞–π–ª:

```cpp
#include <fstream>
```

## –ö–ª–∞—Å—Å—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–∞–º–∏

–í —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —Ç—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–ª–∞—Å—Å–∞:

| –ö–ª–∞—Å—Å      | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                           | –ê–Ω–∞–ª–æ–≥ –≤ C         | –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è        |
| ---------- | ------------------------------------ | ------------------ | --------------------------- |
| `ifstream` | –ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ñ–∞–π–ª–∞               | `fopen(..., "r")`  | `ifstream in("data.txt");`  |
| `ofstream` | –ó–∞–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ–∞–π–ª                 | `fopen(..., "w")`  | `ofstream out("log.txt");`  |
| `fstream`  | –ß—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å –≤ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —Ñ–∞–π–ª | `fopen(..., "r+")` | `fstream file("data.txt");` |

## –û—Ç–∫—Ä—ã—Ç–∏–µ —Ñ–∞–π–ª–æ–≤

–§–∞–π–ª –º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å **–ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–∞** –∏–ª–∏ **—á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥ `.open()`**.

### –ü—Ä–∏–º–µ—Ä—ã:

```cpp
std::ofstream out("hello.txt");                // —Å—Ä–∞–∑—É –æ—Ç–∫—Ä—ã–≤–∞–µ–º —Ñ–∞–π–ª –¥–ª—è –∑–∞–ø–∏—Å–∏
std::ifstream in("input.txt");                 // –æ—Ç–∫—Ä—ã–≤–∞–µ–º —Ñ–∞–π–ª –¥–ª—è —á—Ç–µ–Ω–∏—è
std::fstream fs("data.txt", std::ios::in | std::ios::out); // —á—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å
```

–ò–ª–∏ —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ:

```cpp
std::ofstream out;
out.open("hello.txt");                         // –æ—Ç–∫—Ä—ã–≤–∞–µ–º –ø–æ–∑–¥–Ω–µ–µ
```

### –†–µ–∂–∏–º—ã –æ—Ç–∫—Ä—ã—Ç–∏—è —Ñ–∞–π–ª–æ–≤

–†–µ–∂–∏–º—ã –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è —Ñ–ª–∞–≥–∞–º–∏ –∏–∑ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏–º—ë–Ω `std::ios`.

| –§–ª–∞–≥          | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                             |
| ------------- | -------------------------------------- |
| `ios::in`     | –û—Ç–∫—Ä—ã—Ç–∏–µ —Ñ–∞–π–ª–∞ –¥–ª—è —á—Ç–µ–Ω–∏—è              |
| `ios::out`    | –û—Ç–∫—Ä—ã—Ç–∏–µ —Ñ–∞–π–ª–∞ –¥–ª—è –∑–∞–ø–∏—Å–∏              |
| `ios::app`    | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞ (append)      |
| `ios::binary` | –û—Ç–∫—Ä—ã—Ç–∏–µ —Ñ–∞–π–ª–∞ –≤ –±–∏–Ω–∞—Ä–Ω–æ–º —Ä–µ–∂–∏–º–µ       |
| `ios::trunc`  | –û—á–∏—Å—Ç–∫–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Ñ–∞–π–ª–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ |
| `ios::ate`    | –ü–µ—Ä–µ—Ö–æ–¥ –≤ –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞ –ø–æ—Å–ª–µ –æ—Ç–∫—Ä—ã—Ç–∏—è   |

### –ü—Ä–∏–º–µ—Ä—ã:

```cpp
std::ofstream out("file1.txt", std::ios::out);                 // –∑–∞–ø–∏—Å—å
std::ofstream log("file2.txt", std::ios::app);                 // –¥–æ–∑–∞–ø–∏—Å—å
std::fstream data("file3.dat", std::ios::in | std::ios::out);  // —á—Ç–µ–Ω–∏–µ + –∑–∞–ø–∏—Å—å
std::ofstream bin("file4.bin", std::ios::binary | std::ios::trunc); // –±–∏–Ω–∞—Ä–Ω—ã–π —Ä–µ–∂–∏–º
```

## –ó–∞–∫—Ä—ã—Ç–∏–µ —Ñ–∞–π–ª–æ–≤

–ó–∞–∫—Ä—ã–≤–∞—Ç—å —Ñ–∞–π–ª —Å–ª–µ–¥—É–µ—Ç –ø–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã:

```cpp
out.close();
```

> üí° **–í–∞–∂–Ω–æ:** –µ—Å–ª–∏ –æ–±—ä–µ–∫—Ç –ø–æ—Ç–æ–∫–∞ –≤—ã—Ö–æ–¥–∏—Ç –∏–∑ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏, —Ñ–∞–π–ª –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ ‚Äî –≤—ã–∑—ã–≤–∞—Ç—å `close()` –≤—Ä—É—á–Ω—É—é –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –Ω–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ –∫–æ–¥–∞.

## –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø

### –ó–∞–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö

```cpp
#include <iostream>
#include <fstream>
using namespace std;

int main() {
    ofstream outFile("example.txt");
    if (!outFile) {
        cerr << "–û—à–∏–±–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è —Ñ–∞–π–ª–∞!" << endl;
        return 1;
    }

    outFile << "Hello, World!" << endl;
    outFile << "C++ File Handling Example" << endl;

    outFile.close();
    cout << "–î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –∑–∞–ø–∏—Å–∞–Ω—ã." << endl;
}
```

### –ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å—Ç—Ä–æ—á–Ω–æ

```cpp
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

int main() {
    ifstream inFile("example.txt");
    if (!inFile) {
        cerr << "–û—à–∏–±–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è —Ñ–∞–π–ª–∞!" << endl;
        return 1;
    }

    string line;
    while (getline(inFile, line)) {
        cout << line << endl;
    }

    inFile.close();
}
```

### –ü–æ—Å–∏–º–≤–æ–ª—å–Ω–æ–µ —á—Ç–µ–Ω–∏–µ

```cpp
ifstream file("text.txt");
if (file.is_open()) {
    char c;
    while (file.get(c)) { // —á—Ç–µ–Ω–∏–µ –ø–æ—Å–∏–º–≤–æ–ª—å–Ω–æ
        cout << c;
    }
    file.close();
}
```

> üìò **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:** –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å **—Ç–µ–∫—Å—Ç–æ–≤—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏**, –ª–æ–≥–∞–º–∏, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏ —Ç.–¥.


## –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º (Random Access)

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞, **–ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø** –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–º–µ—â–∞—Ç—å—Å—è –ø–æ —Ñ–∞–π–ª—É –∫ –Ω—É–∂–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏ –∏ —Å—á–∏—Ç—ã–≤–∞—Ç—å –∏–ª–∏ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞–ø—Ä—è–º—É—é.

–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —É–∫–∞–∑–∞—Ç–µ–ª–∏:

| –§—É–Ω–∫—Ü–∏—è      | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                       |
| ------------ | -------------------------------- |
| `seekg(pos)` | –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å **—É–∫–∞–∑–∞—Ç–µ–ª—å —á—Ç–µ–Ω–∏—è** |
| `seekp(pos)` | –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å **—É–∫–∞–∑–∞—Ç–µ–ª—å –∑–∞–ø–∏—Å–∏** |
| `tellg()`    | –£–∑–Ω–∞—Ç—å —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é —á—Ç–µ–Ω–∏—è    |
| `tellp()`    | –£–∑–Ω–∞—Ç—å —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é –∑–∞–ø–∏—Å–∏    |
| `read()`     | –ü—Ä–æ—á–∏—Ç–∞—Ç—å –±–ª–æ–∫ –±–∞–π—Ç–æ–≤            |
| `write()`    | –ó–∞–ø–∏—Å–∞—Ç—å –±–ª–æ–∫ –±–∞–π—Ç–æ–≤             |

### –ü—Ä–∏–º–µ—Ä: –∑–∞–ø–∏—Å—å –∏ —á—Ç–µ–Ω–∏–µ –±–∏–Ω–∞—Ä–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

```cpp
#include <iostream>
#include <fstream>
using namespace std;

int main() {
    // –ó–∞–ø–∏—Å—å –º–∞—Å—Å–∏–≤–∞ –≤ –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª
    int data[5] = {10, 20, 30, 40, 50};
    ofstream outFile("example.dat", ios::binary);
    outFile.write(reinterpret_cast<char*>(data), sizeof(data));
    outFile.close();

    // –ß—Ç–µ–Ω–∏–µ —Ç—Ä–µ—Ç—å–µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –Ω–∞–ø—Ä—è–º—É—é
    ifstream inFile("example.dat", ios::binary);
    if (!inFile) {
        cerr << "–û—à–∏–±–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è —Ñ–∞–π–ª–∞!" << endl;
        return 1;
    }

    int value;
    inFile.seekg(2 * sizeof(int), ios::beg); // –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ 3-–º—É —ç–ª–µ–º–µ–Ω—Ç—É
    inFile.read(reinterpret_cast<char*>(&value), sizeof(value));

    cout << "–¢—Ä–µ—Ç–∏–π —ç–ª–µ–º–µ–Ω—Ç: " << value << endl;
    inFile.close();
}
```

> üí° **–ü–æ—è—Å–Ω–µ–Ω–∏–µ:**
> `reinterpret_cast<char*>` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∞–¥—Ä–µ—Å–∞ –º–∞—Å—Å–∏–≤–∞ –∫ —É–∫–∞–∑–∞—Ç–µ–ª—é –Ω–∞ –±–∞–π—Ç—ã (`char*`), —Ç–∞–∫ –∫–∞–∫ `write()` –∏ `read()` —Ä–∞–±–æ—Ç–∞—é—Ç –∏–º–µ–Ω–Ω–æ —Å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—è–º–∏ –±–∞–π—Ç–æ–≤.

## –ü–æ–ª–µ–∑–Ω—ã–µ –ø—Ä–∏—ë–º—ã

* –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –æ—Ç–∫—Ä—ã—Ç–∏—è —Ñ–∞–π–ª–∞:

  ```cpp
  if (!file.is_open()) { ... }
  ```

* –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ü–∞ —Ñ–∞–π–ª–∞:

  ```cpp
  while (!inFile.eof()) { ... }
  ```

  > ‚ö†Ô∏è –û–¥–Ω–∞–∫–æ –Ω–∞–¥—ë–∂–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `while (getline(...))` –∏–ª–∏ `while (inFile.read(...))`, —Ç–∞–∫ –∫–∞–∫ `eof()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `true` **—Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –Ω–µ—É–¥–∞—á–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è**.

* –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞:

  ```cpp
  inFile.seekg(0, ios::end);
  size_t size = inFile.tellg();
  inFile.seekg(0, ios::beg);
  cout << "–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: " << size << " –±–∞–π—Ç\n";
  ```


## –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞

* Metanit.com: [–§–∞–π–ª–æ–≤—ã–µ –ø–æ—Ç–æ–∫–∏. –û—Ç–∫—Ä—ã—Ç–∏–µ –∏ –∑–∞–∫—Ä—ã—Ç–∏–µ](https://metanit.com/cpp/tutorial/8.2.php), [–ß—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤](https://metanit.com/cpp/tutorial/8.3.php)
* cppreference.com: [std::ifstream / std::ofstream / std::fstream](https://en.cppreference.com/w/cpp/io/basic_ifstream)
